% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_TME_barplot.R
\name{plot_TME_barplot}
\alias{plot_TME_barplot}
\title{Tumor Microenvironment (TME) Barplot Visualization}
\usage{
plot_TME_barplot(
  data_matrix,
  input_type = "count",
  method,
  group_as,
  output_path = "./TME",
  height = 5.2,
  width = 10
)
}
\arguments{
\item{data_matrix}{Data frame. \code{Raw} count matrix or \code{TPM} data (genes Ã— samples).}

\item{input_type}{Character. \code{"count"} (convert count to TPM) or \code{"TPM"} (use TPM directly). Default is \code{"count"}.}

\item{method}{Character. The immune infiltration method (\code{"cibersort"}, \code{"mcpcounter"}, \code{"xcell"}, \code{"quantiseq"}).}

\item{group_as}{Character vector. Clarify the specific names of different treatment groups and the respective numbers of normal and cancer groups in each of them.}

\item{output_path}{Character. Directory to save the plot (default: \code{"./TME"}).}

\item{height}{Numeric. Height of the output PDF (default: \code{5.2}).}

\item{width}{Numeric. Width of the output PDF (default: \code{10}).}
}
\value{
A list containing:
\itemize{
\item \strong{\code{eset_tpm}}: The TPM-transformed expression matrix.
\item \strong{\code{method_model}}: Immune infiltration results.
\item \strong{A stacked barplot PDF file}: Saved at \code{output_path}, showing immune cell fractions per group.
}
}
\description{
\itemize{
\item Converts count matrix to TPM using \code{IOBR::count2tpm()}, or allows direct TPM input.
\item Supports multiple deconvolution methods: \code{"cibersort"}, \code{"mcpcounter"}, \code{"xcell"}, \code{"quantiseq"}.
\item Generates a stacked barplot to visualize immune infiltration across sample groups.
}
}
\details{
This function performs immune infiltration analysis using various deconvolution methods
and visualizes the immune cell composition in a stacked barplot.
\itemize{
\item \strong{Input Data:} Users can provide either a raw count matrix (\code{input_type = "count"}) or TPM data (\code{input_type = "TPM"}).
\item \strong{Group Definition:} Users must provide a valid \code{group_as} vector matching the sample order.
\item \strong{Visualization:} Saves a PDF file showing the fraction of immune cell types across groups.
}
}
\examples{
\dontrun{
# Example usage (using raw count matrix)
group_as <- c(rep("TCGA_normal", 50), rep("TCGA_tumor", 374), rep("HBV Pten KO_normal", 3), rep("HBV Pten KO_tumor", 3))

# TME barplot
TME_barplot_result <- plot_TME_barplot(data_matrix = merge.data, input_type = "count", method = "cibersort", group_as = group_as)

# Extract TPM matrix for further analysis
eset_tpm <- TME_barplot_result$eset_tpm
}

}
